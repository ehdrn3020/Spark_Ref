
## 15장 클러스터에서 스파크 실행하기


### 15.1 스파크 애플리케이션의 아키텍처
```commandline
스파크 드라이버
- 드라이버는 스파크 애플리케이션의 실행을 제어하고 상태 정보(익스큐터 상태 및 태스크)를 유지
- 물리적 컴퓨팅 자원 확보
- 클러스터 매니저와 통신

스파크 익스큐터
- 익스큐터는 스파크 드라이버가 할당한 태스크를 수행하는 프로세스
- 태스크를 수행하고 태스크의 상태를(성공 및 실패)를 드라이버에 보고

클러스터 매니저
- 클러스터 매니저는 스파크 애플리케이션을 실행할 클러스터 머신을 유지
- 스파크가 실행될 때 클러스터 매니저에 자원할당을 요청
- 클러스터 매니저는 '마스터'와 '워커'의 개념이 있음
- 개별 워커노드를 실행하는 데몬 프로세스
- 스파크가 지원하는 클러스터 매니저
 ㄴ standalone cluster manager
 ㄴ apache mesos
 ㄴ hadoop yarn
```
<br/>


### 15.1.1 실행 모드
실행 모드는 애플리케이션을 실행할 때 요청한 자원의 물리적인 위치를 결정
```commandline
클러스터 모드
- 클러스터 매니저는 스파크 실행 파일을 워커 노드에 드라이버와 익스큐터 프로세스를 실행

클라이언트 모드
- 실행 파일을 제출한 클라이언트 머신에 스파크 드라이버가 위치
- 드라이버는 클러스터 외부의 머신에서 실행, 나머지 워커는 클러스터에 위치
- 위의 클라이언트를 에지 노드(edge node)라고 부름

로컬 모드
- 모든 스파크 애플리케이션이 단일 머신에서 실행
- 병렬 처리를 위해 단일 머시느이 스레드를 활용
```
<br/>

```commandline
실선 직사각형 - 스파크 드라이버 프로세스
점선 직사각형 - 익스큐터 프로세스
```

#### 클러스터 모드
<img src="./image/15-1.png" width="400">

#### 클라이언트 모드
<img src="./image/15-2.png" width="400">


### 15.2 스파크 애플리케이션의 생애주기(외부)
